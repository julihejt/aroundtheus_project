!function(){"use strict";class e{constructor(e,t,n){let{name:r,link:o}=e;this._handleImageClick=n,this._name=r,this._link=o,this._cardSelector=t}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})})),this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement.querySelector(".card__image").setAttribute("src",this._link),this._cardElement.querySelector(".card__image").setAttribute("alt",this._name),this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formElement=t,this._errorClass=e.errorClass,this._inputErrorClass=e.inputErrorClass,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEl=[...this._formElement.querySelectorAll(this._inputSelector)]}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_showInputError(e,t){const n=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_hasInvalidInput(){return this._inputEl.some((e=>!e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputEl.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._disableButton()}))}enableValidation(){this._setEventListeners(),this._toggleButtonState()}}const n=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-edit-modal"),o=r.querySelector("#modal-close-button"),i=document.querySelector(".profile__title"),s=document.querySelector("#profile__description"),a=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-description-input"),c=document.querySelector(".profile__add-button"),u=r.querySelector(".modal__form"),d=(r.querySelector("#edit-save-button"),document.querySelector(".cards__list")),m=(document.querySelector("#card-template").content.firstElementChild,document.querySelector("#profile__add-form")),_=document.querySelector("#add__card-form"),h=document.querySelector("#addCard-title-input"),p=document.querySelector("#addCard-description-input"),S=document.querySelector("#profile__close-modal"),E=document.querySelector("#card__image_modal"),y=document.querySelector("#modal__image-close-button"),v=document.querySelector("#modal__image"),f=document.querySelector("#modal__image_description"),b=(document.querySelector(".modal"),document.querySelectorAll(".modal")),q=(document.querySelector(".modal__container"),document.querySelector("#profile-edit-modal"),document.querySelector("#profile-edit-button"),{formSelector:".modal__form",errorClass:"modal__error",inputErrorClass:"modal__input_type_error",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled"});function k(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",L)}function g(e){e.classList.add("modal_opened"),document.addEventListener("keydown",L)}function L(e){"Escape"===e.key&&k(document.querySelector(".modal_opened"))}function C(e){v.setAttribute("src",e.link),v.setAttribute("alt",e.name),f.textContent=e.name,g(E)}function w(t){const n=function(t,n,r){return new e(t,"#card-template",r).getView()}(t,0,C);d.prepend(n)}new t(q,u).enableValidation(),new t(q,_).enableValidation(),b.forEach((e=>{e.addEventListener("click",(t=>{t.target.classList.contains("modal")&&k(e)}))})),[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}].forEach((e=>{w(e)})),n.addEventListener("click",(()=>{a.value=i.textContent.trim(),l.value=s.textContent.trim(),g(r)})),o.addEventListener("click",(()=>{k(r)})),u.addEventListener("submit",(e=>{e.preventDefault(),i.textContent=a.value,s.textContent=l.value,k(r)})),y.addEventListener("click",(()=>{k(E)})),c.addEventListener("click",(()=>{g(m)})),_.addEventListener("submit",(function(e){e.preventDefault(),w({name:h.value,link:p.value}),_.reset(),k(m)})),S.addEventListener("click",(()=>{k(m)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEIsRUFBV0MsRUFDYixHQUNBLElBaklpQixDQUNuQixDQUNFcEYsS0FBTSxrQkFDTkMsS0FBTSxzR0FFUixDQUNFRCxLQUFNLGNBQ05DLEtBQU0seUdBRVIsQ0FDRUQsS0FBTSxpQkFDTkMsS0FBTSw0R0FFUixDQUNFRCxLQUFNLFVBQ05DLEtBQU0scUdBRVIsQ0FDRUQsS0FBTSx3QkFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLG9HQTZHR3VELFNBQVNrQyxJQUNwQkMsRUFBV0QsRUFBUyxJQUd0QjlCLEVBQWtCbEQsaUJBQWlCLFNBQVMsS0FDMUN1RCxFQUFrQm1DLE1BQVFyQyxFQUFhMUMsWUFBWWdGLE9BQ25EbkMsRUFBd0JrQyxNQUFRcEMsRUFBbUIzQyxZQUFZZ0YsT0FDL0RkLEVBQVUxQixFQUFpQixJQUc3QkMsRUFBbUJwRCxpQkFBaUIsU0FBUyxLQUMzQ3lFLEVBQVd0QixFQUFpQixJQUc5Qk8sRUFBZ0IxRCxpQkFBaUIsVUFBVytDLElBQzFDQSxFQUFFQyxpQkFDRkssRUFBYTFDLFlBQWM0QyxFQUFrQm1DLE1BQzdDcEMsRUFBbUIzQyxZQUFjNkMsRUFBd0JrQyxNQUN6RGpCLEVBQVd0QixFQUFpQixJQUc5QmdCLEVBQXNCbkUsaUJBQWlCLFNBQVMsS0FDOUN5RSxFQUFXUCxFQUFlLElBRzVCVCxFQUFpQnpELGlCQUFpQixTQUFTLEtBQ3pDNkUsRUFBVWpCLEVBQVMsSUFHckJFLEVBQVE5RCxpQkFBaUIsVUF6RHpCLFNBQTZCK0MsR0FDM0JBLEVBQUVDLGlCQUdGaUMsRUFBVyxDQUFFM0YsS0FGQXlFLEVBQVcyQixNQUVMbkcsS0FETnlFLEVBQWMwQixRQUUzQjVCLEVBQVE4QixRQUNSbkIsRUFBV2IsRUFDYixJQW9EQUssRUFBaUJqRSxpQkFBaUIsU0FBUyxLQUN6Q3lFLEVBQVdiLEVBQVMsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgLy8gSW5pdGlhbGl6YXRpb25cbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gIH1cblxuICAvLyBFdmVudCBMaXN0ZW5lcnNcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xuICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgICAgbGluazogdGhpcy5fbGluayxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG4gIH1cblxuICAvLyBDYXJkIEFjdGlvbnNcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICAvLyBDYXJkIFJlbmRlcmluZ1xuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLl9saW5rKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWwpIHtcbiAgICAvLyBJbml0aWFsaXphdGlvblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuXG4gICAgLy8gRE9NIEVsZW1lbnRzXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEVsID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcbiAgICBdO1xuICB9XG5cbiAgLy8gSW5wdXQgVmFsaWRhdGlvblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICAvLyBFcnJvciBIYW5kbGluZ1xuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwsIG1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vIEJ1dHRvbiBTdGF0ZVxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsLnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gRXZlbnQgTGlzdGVuZXJzXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFB1YmxpYyBNZXRob2RzXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG59XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW1wb3J0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuaW1wb3J0IEZvcm1WYWxpZGF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzXCI7XG5cbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaW5pdGlhbCBjYXJkcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcgXCIsXG4gIH0sXG5dO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBlbGVtZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsLWNsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0U3VibWl0ID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtc2F2ZS1idXR0b25cIik7XG5jb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuY29uc3QgYWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZC1mb3JtXCIpO1xuY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkX19jYXJkLWZvcm1cIik7XG5jb25zdCBwbGFjZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRDYXJkLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcGxhY2VJbnB1dFVybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkQ2FyZC1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcbmNvbnN0IGNsb3NlQnV0dG9uUGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2Nsb3NlLW1vZGFsXCIpO1xuY29uc3QgY2FyZEltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRfX2ltYWdlX21vZGFsXCIpO1xuY29uc3QgbW9kYWxJbWFnZUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWxfX2ltYWdlLWNsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgbW9kYWxJbWFnZVNyYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgbW9kYWxJbWFnZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWxfX2ltYWdlX2Rlc2NyaXB0aW9uXCJcbik7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG5jb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuY29uc3QgbW9kYWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XG5jb25zdCBlZGl0TW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZE1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuXG5jb25zdCBmb3JtU2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbn07XG5cbmNvbnN0IGZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0aW9uKGZvcm1TZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcbmZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdGlvbihmb3JtU2V0dGluZ3MsIGFkZEZvcm0pO1xuYWRkQ2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGZ1bmN0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5mdW5jdGlvbiBjbG9zZVBvcHVwKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxCeUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBjbG9zZU1vZGFsQnlFc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsQnlFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICBjbG9zZVBvcHVwKG9wZW5lZE1vZGFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XG4gIG1vZGFsSW1hZ2VTcmMuc2V0QXR0cmlidXRlKFwic3JjXCIsIGNhcmREYXRhLmxpbmspO1xuICBtb2RhbEltYWdlU3JjLnNldEF0dHJpYnV0ZShcImFsdFwiLCBjYXJkRGF0YS5uYW1lKTtcbiAgbW9kYWxJbWFnZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcbiAgb3BlblBvcHVwKGNhcmRJbWFnZU1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgbmFtZSA9IHBsYWNlSW5wdXQudmFsdWU7XG4gIGNvbnN0IGxpbmsgPSBwbGFjZUlucHV0VXJsLnZhbHVlO1xuICBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KTtcbiAgYWRkRm9ybS5yZXNldCgpO1xuICBjbG9zZVBvcHVwKGFkZE1vZGFsKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FyZChkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgY2FyZExpc3RFbC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZXZlbnQgbGlzdGVuZXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbm1vZGFscy5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xuICAgICAgY2xvc2VQb3B1cChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcbiAgY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQudHJpbSgpO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudC50cmltKCk7XG4gIG9wZW5Qb3B1cChwcm9maWxlRWRpdE1vZGFsKTtcbn0pO1xuXG5wcm9maWxlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VQb3B1cChwcm9maWxlRWRpdE1vZGFsKTtcbn0pO1xuXG5wcm9maWxlRWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlO1xuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VQb3B1cChwcm9maWxlRWRpdE1vZGFsKTtcbn0pO1xuXG5tb2RhbEltYWdlQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VQb3B1cChjYXJkSW1hZ2VNb2RhbCk7XG59KTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuUG9wdXAoYWRkTW9kYWwpO1xufSk7XG5cbmFkZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcblxuY2xvc2VCdXR0b25QbGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZVBvcHVwKGFkZE1vZGFsKTtcbn0pO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdGlvbiIsInNldHRpbmdzIiwiZm9ybUVsIiwiX2Zvcm1FbGVtZW50IiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbnB1dEVsIiwicXVlcnlTZWxlY3RvckFsbCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsIm1lc3NhZ2UiLCJhZGQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwic29tZSIsImRpc2FibGVkIiwiZm9yRWFjaCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlQ2xvc2VCdXR0b24iLCJwcm9maWxlVGl0bGUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUFkZEJ1dHRvbiIsInByb2ZpbGVFZGl0Rm9ybSIsImNhcmRMaXN0RWwiLCJhZGRNb2RhbCIsImZpcnN0RWxlbWVudENoaWxkIiwiYWRkRm9ybSIsInBsYWNlSW5wdXQiLCJwbGFjZUlucHV0VXJsIiwiY2xvc2VCdXR0b25QbGFjZSIsImNhcmRJbWFnZU1vZGFsIiwibW9kYWxJbWFnZUNsb3NlQnV0dG9uIiwibW9kYWxJbWFnZVNyYyIsIm1vZGFsSW1hZ2VEZXNjcmlwdGlvbiIsIm1vZGFscyIsImZvcm1TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImNsb3NlUG9wdXAiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZU1vZGFsQnlFc2NhcGUiLCJvcGVuUG9wdXAiLCJldnQiLCJrZXkiLCJjYXJkRGF0YSIsImNyZWF0ZUNhcmQiLCJjYXJkRWxlbWVudCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZ2V0Q2FyZCIsInByZXBlbmQiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwidmFsdWUiLCJ0cmltIiwicmVzZXQiXSwic291cmNlUm9vdCI6IiJ9